# 质量门禁

> 4个检查点确保质量

---

## 🚪 4个质量门禁

### Gate 1: Specify阶段

**检查清单**:
- [ ] 用户故事完整 (AS/I WANT/SO THAT)
- [ ] 使用EARS notation
- [ ] 业务规则明确
- [ ] 数据考量清晰

**不通过**: 返回修改Specify

---

### Gate 2: Design阶段

**检查清单**:
- [ ] 符合分层架构
- [ ] 文件清单完整
- [ ] 接口定义清晰
- [ ] 序列图完整

**不通过**: 返回修改Design

---

### Gate 3: Tasks阶段

**检查清单**:
- [ ] 每个task <50行
- [ ] 依赖关系清晰
- [ ] 验收标准明确
- [ ] 工作量合理

**不通过**: 返回拆分Tasks

---

### Gate 4: Implement阶段

**自动化检查**:

```bash
# 编译检查
go build ./...

# 测试检查
go test -cover ./...
# 要求覆盖率 >80%

# Lint检查
golangci-lint run
```

**人工检查**:
- [ ] Code Review通过
- [ ] 功能验证通过
- [ ] 文档已更新

**不通过**: 修复后重新检查

---

## 🤖 自动化集成

### Pre-commit Hook

```bash
#!/bin/sh
# .git/hooks/pre-commit

echo "Running quality checks..."

# Build
go build ./... || exit 1

# Test
go test ./... || exit 1

# Lint
golangci-lint run || exit 1

echo "✅ Quality checks passed!"
```

### CI/CD Pipeline

```yaml
# .github/workflows/quality.yml
name: Quality Gates

on: [push, pull_request]

jobs:
  gate-4:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Build
        run: go build ./...
      
      - name: Test
        run: go test -cover ./...
      
      - name: Lint
        run: golangci-lint run
```

---

## 📊 质量报告

### 生成报告

```bash
# 生成覆盖率报告
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out -o coverage.html

# 生成Lint报告
golangci-lint run --out-format=json > lint-report.json
```

---

## 💡 最佳实践

1. **不跳过门禁** - 每个阶段都检查
2. **自动化优先** - 能自动化的都自动化
3. **快速反馈** - 问题立即修复
4. **持续改进** - 定期Review门禁标准

---

**质量门禁，不容妥协！** 🚫
